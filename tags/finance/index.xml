<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Finance on 极客理想的小专栏</title>
    <link>/tags/finance/</link>
    <description>Recent content in Finance on 极客理想的小专栏</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 28 Apr 2018 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="/tags/finance/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>量化投资策略之均值回归</title>
      <link>/2018/04/28/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E7%AD%96%E7%95%A5%E4%B9%8B%E5%9D%87%E5%80%BC%E5%9B%9E%E5%BD%92/</link>
      <pubDate>Sat, 28 Apr 2018 00:00:00 +0000</pubDate>
      
      <guid>/2018/04/28/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84%E7%AD%96%E7%95%A5%E4%B9%8B%E5%9D%87%E5%80%BC%E5%9B%9E%E5%BD%92/</guid>
      <description>背景文章数据和代码来自于张丹的《均值回归，逆市中的投资机会》
在股票市场中有两种典型的投资策略：趋势追踪(Trend Following) 和 均值回归(Mean Reversion)。 趋势追踪策略的特点在大行情的波动段找到有效的交易信号，不仅简单而且有效，而均值回归策略则是一种反趋势策略，一波大幅上涨后容易出现下跌，而一波大幅下跌后容易出现上涨。其特点在振荡的在震荡的市场中非常有效，捕捉小的机会，本文就将介绍这种策略。
原理均值回归的原理用一个词概括就是物极必反，股票不可能永远在涨，也不可能一直在跌，它的价格总是围绕着一个均值在上下波动
就以平安银行(000001)的日K线为例，可以非常直观地看到均值回归这种现象，20015年到2015年7月的数据。
上图中有3条曲线，黑色线是平安银行向前复权后的每日股价，红色线为20日均线，蓝色线为60日均线。 图中还有一条红色的水平线虚线，是这10年的股价平均值等于7.14元。这10年间，平安银行的股价经历了几波上涨和下跌，多次穿越7.14平均值。那么这个现象就是我们要讨论的均值回归。
通过十年的K线图，我们看到了平安银行的价格走势和均值线，但是在实际操作中，我们不可能把钱放在股市中不闻不问，等个十年，来个大行情。于是我们就要对股价均值重新定义，用20日的均值来代替长期均值，在短周期内找到投资策略。
算法流程如下:
N日平均值 = [T日股价 + (T-1)日股价 + ... + (T-(N-1))日股价]/N
差值 = N日平均值 - N日股价 N日差值均值 = [T日差值 + (T-1)日差值 + ... + (T-(N-1))日差值]/N
N日差值标准差 = sqrt([(T日差值 - T日差值均值)^2 + ... + ((T-(N-1))日差值- (T-(N-1))日差值均值)^2 ]/N)
然后计算偏离点：
T日差值 &amp;gt; T日差值标准差 * 2
我们以偏离点作为买入信号点，以均线和股价的下一个交点做为卖出信号点。这样我们就把均值回归的投资理论，变成了一个数学模型。
实现首先观察数据集：
000001.SZ,2014-07-02,8.14,8.18,8.10,8.17,28604171
每一列说明：
第1列：股票代码第2列：交易日期第3列：开盘价第4列：最高价第5列：最低价第6列：收盘价第7列：交易量# 引用函数库library(plyr)library(xts)## 载入需要的程辑包：zoo## ## 载入程辑包：&amp;#39;zoo&amp;#39;## The following objects are masked from &amp;#39;package:base&amp;#39;:## ## as.</description>
    </item>
    
    <item>
      <title>R语言解读资产定价模型CAPM</title>
      <link>/2018/04/26/r%E8%AF%AD%E8%A8%80%E8%A7%A3%E8%AF%BB%E8%B5%84%E4%BA%A7%E5%AE%9A%E4%BB%B7%E6%A8%A1%E5%9E%8Bcapm/</link>
      <pubDate>Thu, 26 Apr 2018 00:00:00 +0000</pubDate>
      
      <guid>/2018/04/26/r%E8%AF%AD%E8%A8%80%E8%A7%A3%E8%AF%BB%E8%B5%84%E4%BA%A7%E5%AE%9A%E4%BB%B7%E6%A8%A1%E5%9E%8Bcapm/</guid>
      <description>背景这篇文章是阅读张丹所著的《R的极客理想》时的笔记，里面的所用的算法和代码来自于张丹开源在Github上的源代码，我在这基础上加以修改，文中的配图也来自于书本。有兴趣的话可以看看他的博客网站http://fens.me/。可以说他的书还有博文是我走进R语言以及数据科学领域的一个重要的引路者，到现在我仍然会关注他的更新文章。
伴随着2016年中国金融交易市场的跌宕起伏，风险越来越不稳定，利率持续走低，理财等无风险资产的收益不断地在下滑，鸡蛋不能再全放在一个框里面了，要分开装，只有合理的投资组合才能让我们的资产保值，帮助我们在有效的市场中控制风险，稳定我们的收益。
概念解读1952年马克维茨提出了投资组合理论，他认为最佳投资组合应当是风险厌恶特征的投资者的无差异曲线和资产的有效边界的交点。投资者在选择资产时会在收益和风险之间做出平衡，策略很简单，当风险一样时，会选择预期收益最高的资产，而预期收益一样时，会选择风险最低的资产，显而易见，大家都会这么做。
到了1964年，又是两个大神威廉夏普和简莫森在马克维茨的模型基础上提出了单指数模型，在市场组合中引入均值－方差模型，他们认为获得市场任意投资组合的收益与某个共同因素之间有线性关系，最终将其发展为资本资产定价模型（CAPM）。简单来说，这个理论模型如下图所示的样子。
这个模型有两个部分组成，一个是风险资产，另一个是无风险资产。首先理解模型中的风险资产，如下图所示。
对图例的解释：
x轴：风险y轴：收益率灰色区域：金融资产可投资的区域黑色线：有效投资边界A点和B点有两个相同的x值，表示有相同的风险。B点在A点之上，说明B点的收益率比A高，对于投资者来说，当然是投资B。现实中我们会考虑无风险资产，比如国债，然后比较无风险资产和风险资产的关系。如下图：
解释一下：
* B点：一个风险资产* c点：无风险资产，在y轴上* x轴：风险* y轴：收益率* 灰色区域：可投资区域* 黑色线：有效投资边界我们可以把投资分配在c点和B点上，这样就构成了一个由B和C的资产投资组合，风险和收益就将体现在B和C的连线上。我们的目标，就是找到最优的解，在数学上，就是表现为c点到模型的切线，切点为M
衡量的指标衡量投资策略是否好坏，我们一般会看两种指标，alpha和beta。与市场完全相关的收益，叫beta收益，而alpha呢，是和市场不相关的收益部分，通俗地说，alpha是衡量投资人水平的。比如：市场收益率为14%，A证券的β=1.2，短期国债利率6%，投资者对这只股票的进行了交易，获得的实际收益为17%，那么我们怎么判断投资人的水平呢？
首先，先求出A证券的预期收益率 = 6% + 1.2*(14-6)%=15.6%，再用投资者实际收益减去A证券预期收益 17% – 15.6% = 1.4%。最后获得的1.4%就是alpha，表示投资者能力，可以额外获得1.4%的收益。
用R语言构建投资组合模型拜R语言丰富的第三方库所赐，我们可以直接使用已经做好的函数来构建模型而不再需要从零开始搭建。这里会用到quantmod包和performanceAnalytics包。使用quantmod下载数据，PerformanceAnalytics包用于进行各种指标评价。
我们来设计一个应用场景，从美股中抓取IBM，通用电器（GE），苹果（APLL）的股票数据，以及美国标准普尔指数（SP500）的数据。想要获得比标普好的投资收益，那么该如何购买股票？比标普好，我们就需要以标普指数为理想的投资组合，然后我们去分析市场上的股票，分别计算beta，alpha和收益率等指标，反复测试，找到合适的股票组合。
# 加载库library(quantmod)## 载入需要的程辑包：xts## 载入需要的程辑包：zoo## ## 载入程辑包：&amp;#39;zoo&amp;#39;## The following objects are masked from &amp;#39;package:base&amp;#39;:## ## as.</description>
    </item>
    
  </channel>
</rss>